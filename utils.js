utils = (function () {    return {        addURLParam: function (url, key, value) {            if (!url) {                url = '';            }            key = escape(key);            value = escape(value);            var base = url;            var q = "";            var kvp = [];            if (url.indexOf('?') > -1) {                base = url.split('?')[0];                q = url.split('?')[1];                if (url.split('?')[1]) {                    kvp = q.split('&');                }            }            var i = kvp.length;            var x;            while (i--) {                x = kvp[i].split('=');                if (x[0] == key) {                    x[1] = value;                    kvp[i] = x.join('=');                    break;                }            }            if (i < 0) {                kvp[kvp.length] = [key, value].join('=');            }            return base + '?' + kvp.join('&');        },        addHashParam: function (url, key, value) {            if (!url) {                url = '';            }            var query = "";            if (url.indexOf('?') > -1) {                query = (url.split('?')[1]) ? '?' + url.split('?')[1] : '?';                url = url.split('?')[0];            }            key = escape(key);            value = escape(value);            var base = url;            var q = "";            var kvp = [];            if (url.indexOf('#') > -1) {                base = url.split('#')[0];                q = url.split('#')[1];                if (url.split('#')[1]) {                    kvp = q.split('&');                }            }            var i = kvp.length;            var x;            while (i--) {                x = kvp[i].split('=');                if (x[0] == key) {                    x[1] = value;                    kvp[i] = x.join('=');                    break;                }            }            if (i < 0) {                kvp[kvp.length] = [key, value].join('=');            }            return base + '#' + kvp.join('&') + query;        },        //http://stackoverflow.com/questions/5999998/how-can-i-check-if-a-javascript-variable-is-function-type        isFunction: function (v) {            if (v && typeof (v) == "function") {                return true;            } else {                return false;            }        }    };})();